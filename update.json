{
  "update": [
    {
      "path": "plugins/ai/tofigure.js",
      "code": "/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n/* CODE LAIN CHEK\nhttps://whatsapp.com/channel/0029VbARSvBCMY0PDV53rt0m\nJANGAN LUPA FOLLOW\n*/\n\n// CREATE BY REZA DEVS KUROMI\nlet fetch = require(\\\"node-fetch\\\");\nlet FormData = require(\\\"form-data\\\");\nlet { fromBuffer } = require(\\\"file-type\\\");\nlet axios = require(\\\"axios\\\");\n\nexports.run = {\n    usage: [\\\"tofigure\\\", \\\"stylefigure\\\"],\n    hidden: [\\\"tfigure\\\"],\n    use: \\\"command + kirim gambar / reply gambar\\\",\n    category: \\\"ai\\\",\n\n    async: async (m, { kuromi, quoted }) => {\n        try {\n            if (!quoted || !/image/.test(quoted.mime))\n                return m.reply(\\\"Reply gambar atau kirim gambar dengan command.\\\");\n\n            kuromi.sendReact(m.chat, \\\"üïí\\\", m.key);\n\n            // ===============================\n            // DOWNLOAD IMAGE\n            // ===============================\n            let buffer = await quoted.download();\n            if (!buffer) throw \\\"Gagal download gambar.\\\";\n\n            let type = await fromBuffer(buffer);\n            let ext = type?.ext || \\\"jpg\\\";\n\n            // ===============================\n            // UPLOAD KE CATBOX\n            // ===============================\n            let form = new FormData();\n            form.append(\\\"fileToUpload\\\", buffer, \\\"file.\\\" + ext);\n            form.append(\\\"reqtype\\\", \\\"fileupload\\\");\n\n            let imageUrl = await (\n                await fetch(\\\"https://catbox.moe/user/api.php\\\", {\n                    method: \\\"POST\\\",\n                    body: form\n                })\n            ).text();\n\n            if (!/^https?:\\/\\//.test(imageUrl))\n                throw \\\"Gagal upload ke catbox.\\\";\n\n            // ===============================\n            // CALL API NEKOLABS (POST JSON)\n            // ===============================\n            let { data } = await axios.post(\n                \\\"https://api.nekolabs.web.id/style-changer/figure\\\",\n                { imageUrl },\n                { headers: { \\\"Content-Type\\\": \\\"application/json\\\" }, timeout: 120000 }\n            );\n\n            if (!data || !data.success || !data.result)\n                throw \\\"API gagal memproses gambar.\\\";\n\n            // ===============================\n            // SEND RESULT\n            // ===============================\n            await kuromi.sendMessage(\n                m.chat,\n                {\n                    image: { url: data.result },\n                    caption:\n                        `‚ú® *To Figure Success*\\n` +\n                        `‚è± ${data.responseTime || \\\"-\\\"}`\n                },\n                { quoted: m }\n            );\n\n            kuromi.sendReact(m.chat, \\\"‚úÖ\\\", m.key);\n\n        } catch (e) {\n            console.error(e);\n            kuromi.sendReact(m.chat, \\\"‚ùå\\\", m.key);\n            m.reply(\\\"‚ùå Gagal convert ke figure.\\\");\n        }\n    },\n\n    location: \\\"plugins/ai/tofigure.js\\\"\n};",
      "time": "2025-12-16 16:09:40"
    }
  ],
  "remove": [],
  "version": "1.12"
}